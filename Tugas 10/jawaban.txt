1. Buat Database

CREATE DATABASE myshop;
USE myshop;


2. Buat Tabel di Dalam Database

-- Tabel users
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL
);

-- Tabel categories
CREATE TABLE categories (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL
);

-- Tabel items
CREATE TABLE items (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  description VARCHAR(255),
  price INT NOT NULL,
  stock INT NOT NULL,
  category_id INT NOT NULL,
  CONSTRAINT fk_items_category
    FOREIGN KEY (category_id) REFERENCES categories(id)
    ON UPDATE CASCADE
    ON DELETE RESTRICT
);


3. Memasukkan Data pada Table

-- Data users
INSERT INTO users (name, email, password) VALUES
('John Doe', 'john@doe.com', 'john123'),
('Jane Doe', 'jane@doe.com', 'jenita123');

-- Data categories (urutan penting agar id sesuai soal)
INSERT INTO categories (name) VALUES
('gadget'),
('cloth'),
('men'),
('women'),
('branded');

-- Data items
INSERT INTO items (name, description, price, stock, category_id) VALUES
('Sumsang b50', 'hape keren dari merek sumsang', 4000000, 100, 1),
('Uniklooh', 'baju keren dari brand ternama', 500000, 50, 2),
('IMHO Watch', 'jam tangan anak yang jujur banget', 2000000, 10, 1);


4. Mengambil Data dari Database

-- a) Ambil semua user KECUALI password
SELECT id, name, email
FROM users;

-- b1) Items dengan harga > 1.000.000
SELECT *
FROM items
WHERE price > 1000000;

-- b2) Items dengan name mirip 'uniklo'
SELECT *
FROM items
WHERE name LIKE '%uniklo%';

-- c) Tampilkan items beserta nama kategori (join)
SELECT
  i.name,
  i.description,
  i.price,
  i.stock,
  i.category_id,
  c.name AS kategori
FROM items AS i
JOIN categories AS c
  ON i.category_id = c.id;


5. Mengubah Data di Database

-- Ubah harga 'Sumsang b50' menjadi 2.500.000
UPDATE items
SET price = 2500000
WHERE name = 'Sumsang b50';
